# Redis-Full-Check 回滚验证配置文件
# 用于验证 Valkey 8.1 → Redis 4.0 数据一致性（回滚场景）
#
# 只配置必要参数，其他参数说明：
# - 密码认证：我们的环境没有密码，不需要 -p/-a 参数
# - SQLite 输出：使用 --result 文本格式，不需要 -d 参数
# - 过滤功能：全量迁移，不需要 --filterlist 参数
# - 其他参数：interval/batchcount 使用默认值即可

# ========================================
# 基础配置（回滚方向：Green -> Blue）
# ========================================

# 源 Valkey（绿色）
SOURCE_REDIS="redis-green:6379"

# 目标 Redis（蓝色）
TARGET_REDIS="redis-blue:6379"

# ========================================
# 比对配置
# ========================================

# 比对模式（-m 参数）
# 1 = 全值比对（精确，慢，切换前最终验证用）
# 2 = 长度比对（快速，推荐，日常检查用）
# 3 = 仅键比对（最快，只检查键是否存在）
# 4 = 混合模式（全值比对，但大键只比长度）
COMPARE_MODE=2

# 比对轮次（--comparetimes 参数）
# 多轮比对确保一致性，差异会逐轮收敛
# 建议：3 轮（默认值）
COMPARE_TIMES=3

# ========================================
# 性能配置
# ========================================

# QPS 限制（-q 参数）
# 防止对源 Redis 造成压力
# 建议：5000-15000（默认 15000）
QPS_LIMIT=5000

# 并发数（--parallel 参数）
# Goroutine 并发数量，范围 [1, 100]
# 建议：5-20（默认 5）
PARALLEL=10

# ========================================
# 其他默认值（不需要配置）
# ========================================
# --interval=5           # 每轮间隔 5 秒（使用默认值）
# --batchcount=256       # 每批次 256 个键（使用默认值）
# --bigkeythreshold      # 大键阈值（使用默认值）
